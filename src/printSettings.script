Page printSettings
    Attributes
        ID                 : 0
        Scope              : local
        Send Component ID  : disabled
        Opacity            : 127
        Width              : 480
        Effect             : load
        Locked             : no
        Swide up page ID   : disabled
        Swide down page ID : disabled
        Swide left page ID : disabled
        Swide right page ID: disabled
        Fill               : no background (transparent)
    
    Events
        Preinitialize Event
            click luxInit,1
        
        Page Exit Event
            click luxInit,0
        
Variable (int32) speedPending
    Attributes
        ID   : 24
        Scope: global
        Value: 0
    
Variable (int32) flowPending
    Attributes
        ID   : 25
        Scope: global
        Value: 0
    
Variable (int32) zPending
    Attributes
        ID   : 26
        Scope: global
        Value: 0
    
Variable (int32) retPending
    Attributes
        ID   : 27
        Scope: global
        Value: 0
    
Variable (int32) accelPending
    Attributes
        ID   : 28
        Scope: global
        Value: 0
    
Variable (int32) decelPending
    Attributes
        ID   : 29
        Scope: global
        Value: 0
    
Text tZOffset
    Attributes
        ID                      : 12
        Scope                   : local
        Dragging                : 0
        Send Component ID       : disabled
        Opacity                 : 127
        x coordinate            : 33
        y coordinate            : 153
        Width                   : 64
        Height                  : 58
        Effect                  : load
        Fill                    : crop image
        Associated Keyboard     : none
        Font ID                 : 12
        Cropped Back. Picture ID: 120
        Horizontal Alignment    : right
        Vertical Alignment      : bottom
        Input Type              : character
        Text                    : 
        Max. Text Size          : 10
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
Text tRetraction
    Attributes
        ID                      : 13
        Scope                   : local
        Dragging                : 0
        Send Component ID       : disabled
        Opacity                 : 127
        x coordinate            : 116
        y coordinate            : 153
        Width                   : 87
        Height                  : 58
        Effect                  : load
        Fill                    : crop image
        Associated Keyboard     : none
        Font ID                 : 12
        Cropped Back. Picture ID: 120
        Horizontal Alignment    : right
        Vertical Alignment      : bottom
        Input Type              : character
        Text                    : 
        Max. Text Size          : 10
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            numpad.tCaption.txt="Retraction"
            vars.returnVal.txt=""
            page numpad
        
        Touch Release Event
            if(vars.returnVal.txt!="null")
            {
                commands.command.txt+="SET_RETRACTION RETRACT_LENGTH="
                commands.command.txt+=vars.returnVal.txt
                click luxSend,1
                retPending.val=1
            }
        
Text tAccel
    Attributes
        ID                      : 14
        Scope                   : local
        Dragging                : 0
        Send Component ID       : disabled
        Opacity                 : 127
        x coordinate            : 215
        y coordinate            : 153
        Width                   : 111
        Height                  : 58
        Effect                  : load
        Fill                    : crop image
        Associated Keyboard     : none
        Font ID                 : 12
        Cropped Back. Picture ID: 120
        Horizontal Alignment    : right
        Vertical Alignment      : bottom
        Input Type              : character
        Text                    : 
        Max. Text Size          : 10
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            numpad.tCaption.txt="Acceleration"
            vars.returnVal.txt=""
            page numpad
        
        Touch Release Event
            if(vars.returnVal.txt!="null")
            {
                commands.command.txt+="SET_VELOCITY_LIMIT ACCEL="
                commands.command.txt+=vars.returnVal.txt
                click luxSend,1
                accelPending.val=1
            }
        
Text tAccelDecel
    Attributes
        ID                      : 15
        Scope                   : local
        Dragging                : 0
        Send Component ID       : disabled
        Opacity                 : 127
        x coordinate            : 345
        y coordinate            : 153
        Width                   : 99
        Height                  : 58
        Effect                  : load
        Fill                    : crop image
        Associated Keyboard     : none
        Font ID                 : 12
        Cropped Back. Picture ID: 120
        Horizontal Alignment    : right
        Vertical Alignment      : bottom
        Input Type              : character
        Text                    : 
        Max. Text Size          : 10
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            numpad.tCaption.txt="Accel to Decel"
            vars.returnVal.txt=""
            page numpad
        
        Touch Release Event
            if(vars.returnVal.txt!="null")
            {
                commands.command.txt+="SET_VELOCITY_LIMIT ACCEL_TO_DECEL="
                commands.command.txt+=vars.returnVal.txt
                click luxSend,1
                decelPending.val=1
            }
        
Text tSpeed
    Attributes
        ID                      : 16
        Scope                   : local
        Dragging                : 0
        Send Component ID       : disabled
        Opacity                 : 127
        x coordinate            : 75
        y coordinate            : 81
        Width                   : 87
        Height                  : 33
        Effect                  : load
        Fill                    : crop image
        Associated Keyboard     : none
        Font ID                 : 7
        Cropped Back. Picture ID: 120
        Horizontal Alignment    : left
        Vertical Alignment      : top
        Input Type              : character
        Text                    : 
        Max. Text Size          : 10
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            click bSpeed,1
        
        Touch Release Event
            click bSpeed,0
        
Text tFlow
    Attributes
        ID                      : 17
        Scope                   : local
        Dragging                : 0
        Send Component ID       : disabled
        Opacity                 : 127
        x coordinate            : 228
        y coordinate            : 81
        Width                   : 87
        Height                  : 33
        Effect                  : load
        Fill                    : crop image
        Associated Keyboard     : none
        Font ID                 : 7
        Cropped Back. Picture ID: 120
        Horizontal Alignment    : left
        Vertical Alignment      : top
        Input Type              : character
        Text                    : 
        Max. Text Size          : 10
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            click bFlow,1
        
        Touch Release Event
            click bFlow,0
        
Crop Picture q0
    Attributes
        ID                      : 1
        Scope                   : local
        Dragging                : 0
        Send Component ID       : disabled
        Opacity                 : 127
        x coordinate            : 0
        y coordinate            : 0
        Width                   : 480
        Height                  : 272
        Effect                  : load
        Cropped Back. Picture ID: 122
    
Button bFlow
    Attributes
        ID                                  : 2
        Scope                               : local
        Dragging                            : 0
        Send Component ID                   : disabled
        Opacity                             : 127
        x coordinate                        : 181
        y coordinate                        : 65
        Width                               : 127
        Height                              : 65
        Effect                              : top fly into
        Effect Priority                     : 0
        Effect Time                         : 300
        Fill                                : crop image
        Font ID                             : 0
        Cropped Back. Picture ID (Unpressed): 120
        Back. Picture ID (Pressed)          : 65535
        Cropped Back. Picture ID (Pressed)  : 121
        Horizontal Alignment                : center
        Vertical Alignment                  : center
        State                               : unpressed
        Text                                : 
        Max. Text Size                      : 0
        Word wrap                           : disabled
        Horizontal Spacing                  : 0
        Vertical Spacing                    : 0
    
    Events
        Touch Press Event
            numpad.tCaption.txt="Flow"
            vars.returnVal.txt=""
            page numpad
        
        Touch Release Event
            if(vars.returnVal.txt!="null")
            {
                commands.command.txt+="M221 S"
                commands.command.txt+=vars.returnVal.txt
                click luxSend,1
                flowPending.val=1
            }
        
Button bSpeed
    Attributes
        ID                                  : 3
        Scope                               : local
        Dragging                            : 0
        Send Component ID                   : disabled
        Opacity                             : 127
        x coordinate                        : 29
        y coordinate                        : 65
        Width                               : 127
        Height                              : 65
        Effect                              : top fly into
        Effect Priority                     : 0
        Effect Time                         : 300
        Fill                                : crop image
        Font ID                             : 0
        Cropped Back. Picture ID (Unpressed): 120
        Back. Picture ID (Pressed)          : 65535
        Cropped Back. Picture ID (Pressed)  : 121
        Horizontal Alignment                : center
        Vertical Alignment                  : center
        State                               : unpressed
        Text                                : 
        Max. Text Size                      : 0
        Word wrap                           : disabled
        Horizontal Spacing                  : 0
        Vertical Spacing                    : 0
    
    Events
        Touch Press Event
            numpad.tCaption.txt="Speed"
            vars.returnVal.txt=""
            page numpad
        
        Touch Release Event
            if(vars.returnVal.txt!="null")
            {
                commands.command.txt+="M220 S"
                commands.command.txt+=vars.returnVal.txt
                click luxSend,1
                speedPending.val=1
            }
        
Button bClose
    Attributes
        ID                                  : 18
        Scope                               : local
        Dragging                            : 0
        Send Component ID                   : disabled
        Opacity                             : 127
        x coordinate                        : 0
        y coordinate                        : 0
        Width                               : 480
        Height                              : 59
        Effect                              : top fly into
        Effect Priority                     : 0
        Effect Time                         : 300
        Fill                                : crop image
        Font ID                             : 0
        Cropped Back. Picture ID (Unpressed): 120
        Back. Picture ID (Pressed)          : 65535
        Cropped Back. Picture ID (Pressed)  : 121
        Horizontal Alignment                : center
        Vertical Alignment                  : center
        State                               : unpressed
        Text                                : 
        Max. Text Size                      : 0
        Word wrap                           : disabled
        Horizontal Spacing                  : 0
        Vertical Spacing                    : 0
    
    Events
        Touch Press Event
            ReturnObj=-1
            HandleCallback=1
            page ReturnPage
        
Button b0
    Attributes
        ID                                  : 23
        Scope                               : local
        Dragging                            : 0
        Send Component ID                   : disabled
        Opacity                             : 127
        x coordinate                        : 342
        y coordinate                        : 65
        Width                               : 112
        Height                              : 65
        Effect                              : top fly into
        Effect Priority                     : 0
        Effect Time                         : 300
        Fill                                : crop image
        Font ID                             : 0
        Cropped Back. Picture ID (Unpressed): 120
        Back. Picture ID (Pressed)          : 65535
        Cropped Back. Picture ID (Pressed)  : 121
        Horizontal Alignment                : center
        Vertical Alignment                  : center
        State                               : unpressed
        Text                                : 
        Max. Text Size                      : 0
        Word wrap                           : disabled
        Horizontal Spacing                  : 0
        Vertical Spacing                    : 0
    
Hotspot luxSend
    Attributes
        ID               : 4
        Scope            : local
        Dragging         : 0
        Send Component ID: disabled
        Opacity          : 127
        x coordinate     : 65535
        y coordinate     : 65474
        Width            : 106
        Height           : 17
        Effect           : load
    
    Events
        Touch Press Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn luxSend 1
            /// @brief Send a single command
            /// @param[in] command.command.txt
            ///////////////////////////////////////////////////////////////////////////////
            prints commands.command.txt,0
            printh 0A
            ok=0
            click serialHistory,0
            commands.command.txt=""
        
        Touch Release Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn luxSend 0
            /// @brief Send command queue, waiting for ok between each command
            /// @brief Waits a max of 10 times for each ok
            ///////////////////////////////////////////////////////////////////////////////
            strlen commands.queue.txt,QueueLen //get the length of the command queue
            if(ok==1&&busy==0) //Send Queue
            {
                QueueBlocks=0
                while(QueueLen>0&&QueueBlocks<=10)
                {
                    click luxRead,1
                    if(ok==1&&busy==0)
                    {
                        spstr commands.queue.txt,vars.s.txt,"\r",0
                        if(vars.s.txt!="")
                        {
                            strlen vars.s.txt,CommandLen //get the lenght of the command
                            CharLen=QueueLen-CommandLen //calc the amount of chars to copy
                            //remove the command from the queue by getting a substring of the commandqueue
                            substr commands.queue.txt,commands.queue.txt,CommandLen+2,CharLen //+2 to count \r
                            commands.command.txt=vars.s.txt
                            click luxSend,1
                        }else
                        {
                            commands.queue.txt=""
                            QueueLen=0
                        }
                    }else
                    {
                        QueueBlocks+=1
                    }
                    strlen commands.queue.txt,QueueLen //Refresh the command queue lenght
                }
            }
        
Hotspot luxInit
    Attributes
        ID               : 5
        Scope            : local
        Dragging         : 0
        Send Component ID: disabled
        Opacity          : 127
        x coordinate     : 65535
        y coordinate     : 65457
        Width            : 106
        Height           : 17
        Effect           : load
    
    Events
        Touch Press Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn luxInitialize 1
            /// @brief Sets up the lux framework
            ///////////////////////////////////////////////////////////////////////////////
            //ReturnPage=dp
            DiagReturnPage=dp
            if(HandleCallback==0)
            {
                click luxRunOnce,1
            }else
            {
                click luxDoCallback,1
            }
            click luxView,1
            //click luxAnimate,1
            //click luxSleep,1
            //click luxController,1
            click luxDoCallback,0 //Clears callback vars
        
        Touch Release Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn luxInitialize 0
            /// @brief Call when perminently exiting the page
            ///////////////////////////////////////////////////////////////////////////////
            //click luxSleep,0
        
Hotspot luxDoCallback
    Attributes
        ID               : 6
        Scope            : local
        Dragging         : 0
        Send Component ID: disabled
        Opacity          : 127
        x coordinate     : 65535
        y coordinate     : 65508
        Width            : 106
        Height           : 17
        Effect           : load
    
    Events
        Touch Press Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn luxCallback 1
            /// @brief Control callbacks
            ///////////////////////////////////////////////////////////////////////////////
            if(ReturnObj==0) //Direct to custom controller callback
            {
                //  click luxController,0
            }else
            {
                click b[ReturnObj],0
            }
        
        Touch Release Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn luxCallback 0
            /// @brief Clear callback vars
            ///////////////////////////////////////////////////////////////////////////////
            ReturnVal=-1
            vars.returnVal.txt="null"
            HandleCallback=0
            parse.callback.txt="null"
            parse.callbackReturn.txt="null"
        
Hotspot luxRead
    Attributes
        ID               : 7
        Scope            : local
        Dragging         : 0
        Send Component ID: disabled
        Opacity          : 127
        x coordinate     : 65535
        y coordinate     : 65491
        Width            : 106
        Height           : 17
        Effect           : load
    
    Events
        Touch Press Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn luxRead 1
            /// @brief Read the buffer and notify when end of line is reached
            ///////////////////////////////////////////////////////////////////////////////
            if(usize>0)
            {
                while(SerialPos<usize)
                {
                    ucopy parse.startChar.txt,SerialPos,1,0 //Check next character
                    if(u[SerialPos]==10||u[SerialPos]==13) //If linefeed or carriage return
                    {
                        //EOL reached
                        strlen parse.buffer.txt,BufferLen //Record buffer length
                        click luxNotify,1 //Notify listeners
                        parse.buffer.txt="" //Clear buffer
                    }
                    if(u[SerialPos]==13) //Cariage return
                    {
                        SerialPos++       //Lookahead to next char
                        if(SerialPos<usize) //If under buffersize
                        {
                            if(u[SerialPos]!=10) //But no linefeed
                            {
                                SerialPos-- //Rollback
                            }
                        }else
                        {
                            SerialPos-- //Rollback if over buffersize
                        }
                    }else
                    {
                        if(u[SerialPos]!=10) //Add character to line if not CR or LF
                        {
                            parse.buffer.txt+=parse.startChar.txt
                        }
                    }
                    SerialPos++ //Next character
                }
                if(SerialPos==usize) //End of buffer reached
                {
                    code_c
                    BufferLen=0
                    SerialPos=0
                }
            }
        
Hotspot luxView
    Attributes
        ID               : 8
        Scope            : local
        Dragging         : 0
        Send Component ID: disabled
        Opacity          : 127
        x coordinate     : 371
        y coordinate     : 65507
        Width            : 106
        Height           : 18
        Effect           : load
    
    Events
        Touch Press Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn luxView,1
            /// @brief Updates states for controls
            ///////////////////////////////////////////////////////////////////////////////
            covx printer.speed.val,tSpeed.txt,0,0
            tSpeed.txt+="%"
            covx printer.flow.val,tFlow.txt,0,0
            tFlow.txt+="%"
            covx printer.maxAccel.val,tAccel.txt,0,0
            covx printer.maxAccelDecel.val,tAccelDecel.txt,0,0
            tRetraction.txt=printer.retractLen.txt
        
Hotspot luxNotify
    Attributes
        ID               : 9
        Scope            : local
        Dragging         : 0
        Send Component ID: disabled
        Opacity          : 127
        x coordinate     : 65419
        y coordinate     : 0
        Width            : 106
        Height           : 16
        Effect           : load
    
    Events
        Touch Press Event
            click parseCommon,1
            click parseSDPrint,1
            //click parseTemp,1
            //click parsePosition,1
            click serialHistory,1
        
Hotspot serialHistory
    Attributes
        ID               : 10
        Scope            : local
        Dragging         : 0
        Send Component ID: disabled
        Opacity          : 127
        x coordinate     : 65419
        y coordinate     : 241
        Width            : 106
        Height           : 15
        Effect           : load
    
    Events
        Touch Press Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn serialHistory 1
            /// @brief Preserves command recieved history
            ///////////////////////////////////////////////////////////////////////////////
            click historyFilters,1
            parse.last.txt=parse.buffer.txt
            if(parse.last.txt!="")
            {
                strlen parse.last.txt,BuffHistNewLineLen
                strlen connect.history.txt,BuffHistLen
                BuffHistNewLen=BuffHistLen+BuffHistNewLineLen
                if(BuffHistNewLen>=connect.history.txt_maxl) //Check if reached buffer lenght
                {
                    //Cut lenght of new command out of buffer
                    substr connect.history.txt,vars.slarge.txt,BuffHistNewLineLen,connect.history.txt_maxl
                    connect.history.txt=vars.slarge.txt
                    //Find length until next \r
                    spstr connect.history.txt,vars.slarge.txt,"\r",0
                    strlen vars.slarge.txt,BuffHistTrimLen
                    BuffHistTrimLen+=1 // Trim one more char
                    //Cut that out of the rest of the buffer
                    strlen connect.history.txt,BuffHistLen //Get new buffer len
                    substr connect.history.txt,vars.slarge.txt,BuffHistTrimLen+1,BuffHistLen-BuffHistTrimLen //+1 is to advance cursor
                    connect.history.txt=vars.slarge.txt
                }
                //connect.history.txt+="R: "
                connect.history.txt+=parse.last.txt
                connect.history.txt+="\r"
            }
        
        Touch Release Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn serialHistory 0
            /// @brief Preserves command sent history
            ///////////////////////////////////////////////////////////////////////////////
            // Scroll up command history
            commands.last.txt=commands.command.txt
            strlen commands.last.txt,BuffHistNewLineLen
            strlen connect.history.txt,BuffHistLen
            BuffHistNewLen=BuffHistLen+BuffHistNewLineLen
            if(BuffHistNewLen>=connect.history.txt_maxl) //Check if reached buffer lenght
            {
                //Cut lenght of new command out of buffer
                substr connect.history.txt,vars.slarge.txt,BuffHistNewLineLen,connect.history.txt_maxl
                connect.history.txt=vars.slarge.txt
                //Find length until next \r
                spstr connect.history.txt,vars.slarge.txt,"\r",0
                strlen vars.slarge.txt,BuffHistTrimLen
                BuffHistTrimLen+=1 // Trim one more char
                //Cut that out of the rest of the buffer
                strlen connect.history.txt,BuffHistLen //Get new buffer len
                substr connect.history.txt,vars.slarge.txt,BuffHistTrimLen+1,BuffHistLen-BuffHistTrimLen //+1 is to advance cursor
                connect.history.txt=vars.slarge.txt
            }
            connect.history.txt+="S: "
            connect.history.txt+=commands.last.txt
            connect.history.txt+="\r"
        
Hotspot historyFilters
    Attributes
        ID               : 11
        Scope            : local
        Dragging         : 0
        Send Component ID: disabled
        Opacity          : 127
        x coordinate     : 65419
        y coordinate     : 256
        Width            : 106
        Height           : 15
        Effect           : load
    
    Events
        Touch Press Event
            //Qualify Line
            parse.matched.val=0
            if(historyFilters.swTemp.val==1)
            {
                parse.lineMatch.txt=" T:"
                strlen parse.lineMatch.txt,j
                substr parse.buffer.txt,parse.eval.txt,0,j
                if(parse.eval.txt==parse.lineMatch.txt)
                {
                    parse.matched.val=1
                }
                parse.lineMatch.txt="ok T:" //Handle M105 Temp Response
                strlen parse.lineMatch.txt,j
                substr parse.buffer.txt,parse.eval.txt,0,j
                if(parse.eval.txt==parse.lineMatch.txt)
                {
                    parse.matched.val=1
                }
            }
            if(historyFilters.swBusy.val==1)
            {
                parse.lineMatch.txt="echo:busy: processing" //Busy
                strlen parse.lineMatch.txt,j
                substr parse.buffer.txt,parse.eval.txt,0,j
                if(parse.eval.txt==parse.lineMatch.txt)
                {
                    parse.matched.val=1
                }
            }
            if(historyFilters.swSDCard.val==1)
            {
                parse.lineMatch.txt="Not SD printing" //SD Status
                strlen parse.lineMatch.txt,j
                substr parse.buffer.txt,parse.eval.txt,0,j
                if(parse.eval.txt==parse.lineMatch.txt)
                {
                    parse.matched.val=1
                }
                parse.lineMatch.txt="SD printing byte " //SD Progress
                strlen parse.lineMatch.txt,j
                substr parse.buffer.txt,parse.eval.txt,0,j
                if(parse.eval.txt==parse.lineMatch.txt)
                {
                    parse.matched.val=1
                }
            }
            if(historyFilters.swEcho.val==1)
            {
                parse.lineMatch.txt="echo:echo:"
                strlen parse.lineMatch.txt,j
                substr parse.buffer.txt,parse.eval.txt,0,j
                if(parse.eval.txt==parse.lineMatch.txt)
                {
                    spstr parse.buffer.txt,parse.buffer.txt,"echo:",2
                }
            }
            if(historyFilters.swEcho.val==1)
            {
                parse.lineMatch.txt="echo:"
                strlen parse.lineMatch.txt,j
                substr parse.buffer.txt,parse.eval.txt,0,j
                if(parse.eval.txt==parse.lineMatch.txt)
                {
                    spstr parse.buffer.txt,parse.buffer.txt,"echo:",1
                }
            }
            parse.lineMatch.txt="X:"
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                parse.matched.val=1
            }
            if(parse.matched.val==1)
            {
                parse.buffer.txt=""
                parse.matched.val=0
            }
        
Hotspot parseCommon
    Attributes
        ID               : 21
        Scope            : local
        Dragging         : 0
        Send Component ID: disabled
        Opacity          : 127
        x coordinate     : 65420
        y coordinate     : 15
        Width            : 106
        Height           : 14
        Effect           : load
    
    Events
        Touch Press Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn     parseCommon 1
            /// @brief  Essential items to be parsed
            ///////////////////////////////////////////////////////////////////////////////
            parse.lineMatch.txt="ok" //Ok
            if(parse.buffer.txt==parse.lineMatch.txt)
            {
                ok=1
                busy=0
            }
            parse.lineMatch.txt="ok B:" //Handle M105
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                ok=1
                busy=0
            }
            parse.lineMatch.txt="!! " //Error
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                spstr parse.buffer.txt,printer.error.txt,parse.lineMatch.txt,1
                parse.buffer.txt=""
                page error
            }
            parse.lineMatch.txt="// speed_factor: " //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                spstr parse.buffer.txt,vars.s.txt,parse.lineMatch.txt,1
                covx vars.s.txt,printer.speed.val,0,0
                speedPending.val=0
            }
            parse.lineMatch.txt="// extrude_factor: " //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                spstr parse.buffer.txt,vars.s.txt,parse.lineMatch.txt,1
                covx vars.s.txt,printer.flow.val,0,0
                flowPending.val=0
            }
            parse.lineMatch.txt="// max_velocity: " //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                spstr parse.buffer.txt,vars.s.txt,parse.lineMatch.txt,1
                covx vars.s.txt,printer.maxVelocity.val,0,0
            }
            parse.lineMatch.txt="// max_accel: " //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                spstr parse.buffer.txt,vars.s.txt,parse.lineMatch.txt,1
                covx vars.s.txt,printer.maxAccel.val,0,0
                accelPending.val=0
            }
            parse.lineMatch.txt="// max_accel_to_decel: " //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                spstr parse.buffer.txt,vars.s.txt,parse.lineMatch.txt,1
                covx vars.s.txt,printer.maxAccelDecel.val,0,0
                decelPending.val=0
            }
            parse.lineMatch.txt="// square_corner_velocity: " //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                spstr parse.buffer.txt,vars.s.txt,parse.lineMatch.txt,1
                covx vars.s.txt,printer.sqCornerVel.txt,0,0
            }
            parse.lineMatch.txt="// RETRACT_LENGTH=" //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                spstr parse.buffer.txt,vars.s.txt,parse.lineMatch.txt,1
                spstr vars.s.txt,vars.s2.txt," ",0
                spstr vars.s2.txt,vars.s.txt,".",0
                printer.retractLen.txt=vars.s.txt
                printer.retractLen.txt+="."
                spstr vars.s2.txt,vars.s.txt,".",1 //Decimal to 2 places
                substr vars.s.txt,vars.s2.txt,0,2
                printer.retractLen.txt+=vars.s2.txt
                retPending.val=0
            }
        
        Touch Release Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn         parseCommon 0
            ///
            /// @brief      Parse buffer using a starting and ending position
            /// @param[in]  parse.search.txt      Text to search for
            /// @param[in]  parse.startPos.val    Starting char postion to search from
            /// @param[out] parse.matched.val     1 if match, 0 if no match
            ///////////////////////////////////////////////////////////////////////////////
            parse.matched.val=0
            parse.eval.txt=parse.buffer.txt
            strlen parse.search.txt,j
            substr parse.eval.txt,parse.result.txt,parse.startPos.val,j
            if(parse.result.txt==parse.search.txt)
            {
                parse.matched.val=1
            }else
            {
                parse.matched.val=0
            }
        
Hotspot parseSDPrint
    Attributes
        ID               : 22
        Scope            : local
        Dragging         : 0
        Send Component ID: disabled
        Opacity          : 127
        x coordinate     : 65420
        y coordinate     : 62
        Width            : 106
        Height           : 16
        Effect           : load
    
    Events
        Touch Press Event
            //Progress
            parse.lineMatch.txt="SD printing byte " //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                spstr parse.buffer.txt,vars.s.txt,parse.lineMatch.txt,1 //Split by qualifier
                spstr vars.s.txt,vars.s2.txt,"/",0 //Current Byte
                covx vars.s2.txt,printer.currentByte.val,0,0
                spstr vars.s.txt,vars.s2.txt,"/",1 //Total Bytes
                covx vars.s2.txt,printer.totalBytes.val,0,0
                printer.sdPrinting.val=1
                printer.paused.val=0
                printing.resumePending.val=0
                printer.printFinished.val=0
            }
            parse.lineMatch.txt="Not SD printing." //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                printer.sdPrinting.val=0
                printer.paused.val=0
                printing.stopPending.val=0
            }
            parse.lineMatch.txt="// Print Paused" //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                printer.paused.val=1
                printing.pausePending.val=0
            }
            // Finished
            parse.lineMatch.txt="Done printing file" //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                printer.currentByte.val=printer.totalBytes.val
                printer.sdPrinting.val=0
                printer.paused.val=0
                printer.printFinished.val=1
            }
            // Print Time
            parse.lineMatch.txt="// Print Time: " //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                spstr parse.buffer.txt,printer.printTime.txt,": ",1
            }
            // M117
            parse.lineMatch.txt="// M117: " //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                spstr parse.buffer.txt,printer.m117.txt,parse.lineMatch.txt,1
            }
            parse.lineMatch.txt="File opened:" //Qualify Line
            strlen parse.lineMatch.txt,j
            substr parse.buffer.txt,parse.eval.txt,0,j
            if(parse.eval.txt==parse.lineMatch.txt)
            {
                spstr parse.buffer.txt,vars.s.txt,parse.lineMatch.txt,1
                spstr vars.s.txt,printer.fileName.txt," Size:",0
                spstr parse.buffer.txt,vars.s.txt," Size:",1
                covx vars.s.txt,printer.totalBytes.val,0,0
                printing.tMsg.txt=printer.fileName.txt
            }
        
Hotspot luxPageAnimate
    Attributes
        ID               : 31
        Scope            : local
        Dragging         : 0
        Send Component ID: disabled
        Opacity          : 127
        x coordinate     : 116
        y coordinate     : 65509
        Width            : 106
        Height           : 17
        Effect           : load
    
    Events
        Touch Press Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn luxPageAnimate
            /// @brief Animations specific to this page
            ///////////////////////////////////////////////////////////////////////////////
            if(speedPending.val==1)
            {
                if(Frame==0)
                {
                    tSpeed.aph=0
                }else
                {
                    tSpeed.aph=127
                }
            }else
            {
                tSpeed.aph=127
            }
            if(flowPending.val==1)
            {
                if(Frame==0)
                {
                    tFlow.aph=0
                }else
                {
                    tFlow.aph=127
                }
            }else
            {
                tFlow.aph=127
            }
            if(retPending.val==1)
            {
                if(Frame==0)
                {
                    tRetraction.aph=0
                }else
                {
                    tRetraction.aph=127
                }
            }else
            {
                tRetraction.aph=127
            }
            if(accelPending.val==1)
            {
                if(Frame==0)
                {
                    tAccel.aph=0
                }else
                {
                    tAccel.aph=127
                }
            }else
            {
                tAccel.aph=127
            }
            if(decelPending.val==1)
            {
                if(Frame==0)
                {
                    tAccelDecel.aph=0
                }else
                {
                    tAccelDecel.aph=127
                }
            }else
            {
                tAccelDecel.aph=127
            }
        
Hotspot luxRunOnce
    Attributes
        ID               : 32
        Scope            : local
        Dragging         : 0
        Send Component ID: disabled
        Opacity          : 127
        x coordinate     : 116
        y coordinate     : 65490
        Width            : 106
        Height           : 17
        Effect           : load
    
    Events
        Touch Press Event
            commands.command.txt="M105\rM115\rM114\r"
            commands.command.txt+="M220\rM221\r"
            commands.command.txt+="SET_VELOCITY_LIMIT\rGET_RETRACTION\r"
            commands.command.txt+="M503\r"
            click luxSend,1
        
Timer luxRun
    Attributes
        ID         : 20
        Scope      : local
        Period (ms): 100
        Enabled    : yes
    
    Events
        Timer Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn luxRun
            /// @breif Main Program Loop
            ///////////////////////////////////////////////////////////////////////////////
            click luxRead,1
            click luxView,1
            click luxSend,0
        
Timer luxAnimTimer
    Attributes
        ID         : 30
        Scope      : local
        Period (ms): 50
        Enabled    : yes
    
    Events
        Timer Event
            ///////////////////////////////////////////////////////////////////////////////
            /// @fn luxAnimTimer
            ///////////////////////////////////////////////////////////////////////////////
            if(luxAnimTimer.tim==50)
            {
                luxAnimTimer.tim=1000
            }
            Frame=Frame^1 //Toggle Frame between 0 and 1
            click luxPageAnimate,1
        
TouchCap tCap
    Attributes
        ID   : 19
        Scope: local
        Value: 0
    
    Events
        Touch Press Event
            ReturnObj=tCap.val
        
