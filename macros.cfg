[gcode_macro M31]
gcode:
    {% set elapsed = printer.print_stats.total_duration  %}
    {% if elapsed %}
        {% set hours = (elapsed // 3600) %}
        {% set minutes = ((elapsed % 3600) // 60) %}
        {% set seconds = (elapsed % 60) %}
        { action_respond_info("Print Time: %dh %dm %ds" % ( hours, minutes, seconds)) }
    {% else %}
        { action_respond_info("No active print") }
    {% endif %}